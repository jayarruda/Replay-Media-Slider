## Jellyfin Media Slider

An all-in-one JavaScript toolkit for Jellyfin, featuring a customizable Media Slider builder, music player, Netflix-style pause screen, Netflix-like HoverVideo, quality labels on cards, DiceBear avatar generator, and a sleek notification panel.

## ğŸ“‘ Table of Contents

* [ğŸ–¼ï¸ Screenshots / Ekran GÃ¶rÃ¼ntÃ¼leri](#screenshots)
* [âœ¨ Features / Ã–zellikler](#features)
* [âš™ï¸ Installation / Kurulum](#install)

  * [ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e Kurulum](#tr-install)
  * [ğŸ‡¬ğŸ‡§ English Installation](#en-install)
* [ğŸµ Synchronized Lyrics Script / Senkronize ÅarkÄ± SÃ¶zleri BetiÄŸi](#lyrics)

  * [ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e KullanÄ±m](#lyrics-tr)
  * [ğŸ‡¬ğŸ‡§ English Usage](#lyrics-en)
* [ğŸ¬ Trailer Scripts / Fragman Betikleri](#trailers)

  * [ğŸ‡¬ğŸ‡§ English Guide](#trailers-en)
  * [ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e Rehber](#trailers-tr)
* [ğŸ“„ License](#license)

---

<a id="screenshots"></a>

## ğŸ–¼ï¸ Screenshots / Ekran GÃ¶rÃ¼ntÃ¼leri

### DiceBear Avatar GÃ¶rÃ¼nÃ¼mÃ¼ / DiceBear Avatar Skin

![diceBear](https://github.com/user-attachments/assets/713fc481-7e60-43ab-bdf8-463bbb47ff78)

### Bildirim ModalÄ± / Notification Modal

![bildirim](https://github.com/user-attachments/assets/b6533b70-743f-454d-adab-083d1d8a40ca)
![bildirim1](https://github.com/user-attachments/assets/041f9727-6ee9-4583-bebf-5ac7e7bd0a86)

### Duraklatma EkranÄ± / Pause Screen

![pausescreen](https://github.com/user-attachments/assets/35b3a248-423b-4de9-987b-a633d72ba191)


### Kompakt GÃ¶rÃ¼nÃ¼m / Compact View

![co](https://github.com/user-attachments/assets/afac00a0-68c7-4a7e-b551-f946ec4f1e7b)

### Tam Ekran / Full Screen

![fsc](https://github.com/user-attachments/assets/e7ec8a4c-b82c-426c-ab76-8dd561b28845)

### Normal gÃ¶rÃ¼nÃ¼m / Normal view

![ng](https://github.com/user-attachments/assets/80e7b0fb-6c8b-4076-ad33-4832bbf1e972)

### KonumlandÄ±rma yapÄ±lmÄ±ÅŸ normal gÃ¶rÃ¼nÃ¼m / Normal view with positioning

![ngy](https://github.com/user-attachments/assets/294cc2a7-3c3c-423b-88ff-a18b79dc6f46)

### Fragman / Trailer

#### YerleÅŸik Fragman / Embedded Trailer

![yf](https://github.com/user-attachments/assets/c16c85b1-d14d-42a5-88c4-aa4de182795f)

#### Fragman ModalÄ± / Trailer Popup

![fm](https://github.com/user-attachments/assets/2636496c-4f9b-4a39-8516-8580d39b05fe)

### HoverTrailers

![hovertrailer](https://github.com/user-attachments/assets/13549ae1-6afc-42e3-a6bd-73efc902f5d2)

### Popovers

![popovers](https://github.com/user-attachments/assets/7247488f-0b2a-47e6-8972-3be7f7e7c992)

### StudioHubs

![studiohubs](https://github.com/user-attachments/assets/54689ce8-8866-4544-93b1-a51afc9a3d7f)

### Ayarlar ModalÄ± / Settings Popup

![st](https://github.com/user-attachments/assets/080a819c-a1a4-4f10-81ec-fe0dcba885e1)

---

<a id="features"></a>

## âœ¨ Features / Ã–zellikler

### English

* Per-user list creation
* Automatic list updates
* Customizable Jellyfin API integration
* Manual positioning for theme compatibility
* GMMP Music Player
* Pause Screen
* Avatar Generator (DiceBear supported)
* Advanced settings management
* Global Quality Labels in Jellyfin
* Netflix-like Hover Video Previews
* Newly Added Content & Notifications Module
* StudioHubs (Disney+ style)
* Trailer Fetching Scripts

### TÃ¼rkÃ§e

* Her kullanÄ±cÄ± iÃ§in ayrÄ± liste oluÅŸturma
* Otomatik liste gÃ¼ncelleme
* Ã–zelleÅŸtirilebilir Jellyfin API entegrasyonu
* Manuel konumlandÄ±rma (tema uyumluluÄŸu)
* GMMP MÃ¼zik OynatÄ±cÄ±
* Duraklatma EkranÄ±
* Avatar OluÅŸturucu (DiceBear desteÄŸiyle)
* GeliÅŸmiÅŸ ayar yÃ¶netimi
* Jellyfin genelinde kalite etiketleri
* Netflix benzeri hover video Ã¶nizlemeleri
* Yeni iÃ§erik ve sistem bildirim modÃ¼lÃ¼
* StudioHubs (Disney+ tarzÄ±)
* Fragman edinim betikleri

---

<a id="install"></a>

## âš™ï¸ Installation / Kurulum

<a id="tr-install"></a>

### ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e Kurulum

#### Eklenti olarak

* Jellyfin yÃ¶netici paneline giriÅŸ yapÄ±n.
* Eklentiler (Plugins) bÃ¶lÃ¼mÃ¼ne gidin.
* Katalog (Catalog) sekmesine tÄ±klayÄ±n.
* Ãœsteki ayar ikonuna tÄ±klayarak + ikonu ile yeni kaynak ekle sayfasÄ±nÄ± aÃ§Ä±n ve aÅŸaÄŸÄ±daki adresi ekleyin

```
https://raw.githubusercontent.com/G-grbz/Jellyfin-Media-Slider/main/manifest.json 
```

* KaynaÄŸÄ± kaydedin ve Katalog bÃ¶lÃ¼mÃ¼nde JMSFusion eklentisini bulun ve yÃ¼kleyin.
* JMS-Fusion yÃ¼klendikten sonra deÄŸiÅŸikliklerin geÃ§erli olmasÄ± iÃ§in Jellyfinâ€™i tekrar yeniden baÅŸlatÄ±n.
* Yeniden baÅŸlatma sonrasÄ± ana sayfaya dÃ¶nÃ¼p bir kaÃ§ kez ctrl + f5 ile sayfayÄ± yenileyin

#### Manuel Kurulum

##### Windows iÃ§in

Ä°ndirdiÄŸiniz sÄ±kÄ±ÅŸtÄ±rÄ±lmÄ±ÅŸ klasÃ¶rÃ¼ herhangi boÅŸ bir klasÃ¶re Ã§Ä±karÄ±p `install.bat` betiÄŸini yÃ¶netici olarak Ã§alÄ±ÅŸtÄ±rÄ±n ve tarayÄ±cÄ± Ã§erezlerini birkaÃ§ kez temizleyin.

##### YÃ¼klemeyi KaldÄ±rma

`uninstall.bat` betiÄŸini yÃ¶netici olarak Ã§alÄ±ÅŸtÄ±rÄ±n.

##### Linux iÃ§in

```bash
git clone https://github.com/G-grbz/Jellyfin-Media-Slider
cd Jellyfin-Media-Slider/Resources/slider/
```

##### Kurulum scriptini Ã§alÄ±ÅŸtÄ±rÄ±n:

```bash
sudo chmod +x install.sh && sudo ./install.sh
```

##### TarayÄ±cÄ± Ã§erezlerini temizleyin.

##### Liste GÃ¼ncelleme Scripti

listUpdate klasÃ¶rÃ¼ndeki script belirli aralÄ±klarla kullanÄ±cÄ± listelerini gÃ¼nceller.

##### Gerekli Ayarlar

`.env` dosyasÄ±nÄ± dÃ¼zenleyerek gerekli bilgileri girin.

##### Script SeÃ§enekleri

`updateList` iÃ§erikleri rastgele listeler (deÄŸerleri deÄŸiÅŸtirmek iÃ§in `/modules/listConfig.json` el ile yapÄ±landÄ±rÄ±lmalÄ± ve script yeniden baÅŸlatÄ±lmalÄ±dÄ±r.)

DetaylÄ± aÃ§Ä±klamalar:

* `itemLimit:` Slider'da gÃ¶sterilecek maksimum Ã¶ÄŸe sayÄ±sÄ±
* `garantiLimit:` Her iÃ§erik tÃ¼rÃ¼nden garanti edilecek minimum Ã¶ÄŸe sayÄ±sÄ±
* `listLimit:` Ã–nceki listelerin saklanacaÄŸÄ± maksimum sayÄ± (tekrarlarÄ± Ã¶nlemek iÃ§in)
* `listRefresh:` Listenin yenilenme aralÄ±ÄŸÄ± (milisaniye - 300000ms = 5 dakika)
* `listcustomQueryString:` Jellyfin API'si iÃ§in Ã¶zel sorgu parametreleri

##### Script Ã‡alÄ±ÅŸtÄ±rma

###### list ve listUpdate klasÃ¶rÃ¼ne okuma yazma izni verin

```bash
sudo chmod -R a+rw /usr/share/jellyfin/web/slider/list && sudo chmod -R a+rw /usr/share/jellyfin/web/slider/listUpdate
```

###### Gerekli baÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kleyin:

```bash
cd /usr/share/jellyfin/web/slider/listUpdate && npm install dotenv node-fetch
```

###### scripti Ã§alÄ±ÅŸtÄ±rÄ±n:

```bash
node updateList.mjs
```

###### YÃ¼klemeyi KaldÄ±rma

```bash
sudo chmod +x /usr/share/jellyfin/web/slider/uninstall.sh && sudo sh /usr/share/jellyfin/web/slider/uninstall.sh
```

<a id="en-install"></a>

### ğŸ‡¬ğŸ‡§ English Installation

#### Installation with a plugin

* Log in to your Jellyfin admin dashboard.
* Go to the Plugins section.
* Click on the Catalog tab.
* Click the settings icon at the top, then use the + button to open the â€œAdd Repositoryâ€ page and enter the following address:

```
https://raw.githubusercontent.com/G-grbz/Jellyfin-Media-Slider/main/manifest.json
```

* Save the repository, then go to the Catalog section, find the JMS-Fusion plugin, and install it.
* After installing JMS-Fusion, restart Jellyfin again to apply the changes.
* After restarting, go back to the home page and refresh the page with ctrl + f5 a few times.

#### Manual Installation

##### For Windows

Extract the downloaded compressed folder to any empty folder, then run the `install.bat` file as administrator and clear your browser cookies a few times.

##### Uninstalling

Run the script `uninstall.bat` as administrator.

##### For Linux

```bash
git clone https://github.com/G-grbz/Jellyfin-Media-Slider
cd Jellyfin-Media-Slider/Resources/slider/
```

##### Run the installation script:

```bash
sudo chmod +x install.sh && sudo ./install.sh
```

##### Clear browser cookies to ensure the changes take effect.

##### List Update Script

The script in the listUpdate folder updates user lists at specific intervals.

##### Required Settings

Edit the .env file and insert the necessary information.

##### Script Options

`updateList` lists the contents randomly (`/modules/listConfig.json` needs to be configured manually and the script needs to be restarted for the changes to take effect.)

Detailed explanations:

* `itemLimit:` Maximum number of items to show in slider
* `garantiLimit:` Minimum guaranteed items per content type (Movie/Series/BoxSet)
* `listLimit:` Max number of previous lists to store (prevent duplicates)
* `listRefresh:` Refresh interval in milliseconds (300000ms = 5 minutes)
* `listcustomQueryString:` Custom query parameters for Jellyfin API

##### Running the Script

###### Give read-write permission to the list and listUpdate folder

```bash
sudo chmod -R a+rw /usr/share/jellyfin/web/slider/list && sudo chmod -R a+rw /usr/share/jellyfin/web/slider/listUpdate
```

###### Install dependencies:

```bash
cd /usr/share/jellyfin/web/slider/listUpdate && npm install dotenv node-fetch
```

###### Run the script:

```bash
node updateList.mjs
```

###### Uninstallation

```bash
sudo chmod +x /usr/share/jellyfin/web/slider/uninstall.sh && sudo sh /usr/share/jellyfin/web/slider/uninstall.sh
```

---

<a id="lyrics"></a>

## ğŸµ Synchronized Lyrics Script / Senkronize ÅarkÄ± SÃ¶zleri BetiÄŸi

<a id="lyrics-tr"></a>

### ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e

`lrclib.net` Ã¼zerinden ÅŸarkÄ± sÃ¶zlerini Ã§ekebilen bir betik ekledim (`lrclib.sh`). Bu betik eklentiden baÄŸÄ±msÄ±z olarak Ã§alÄ±ÅŸmaktadÄ±r. (Linux)

**Gerekenler:** `curl`, `jq`, `find`

**Dosya adÄ± formatÄ±:** `'sanatÃ§Ä±' - 'parÃ§a adÄ±'` (Ã–rn: `Ali KÄ±nÄ±k - Ali AyÅŸeyi Seviyor`)

**KullanÄ±m:**

```bash
sh lrclib.sh /MÃ¼zik/Dosya/Yolu
```

Mevcut sÃ¶zlerin Ã¼zerine yazmak iÃ§in:

```bash
sh lrclib.sh /MÃ¼zik/Dosya/Yolu --overwrite
```

Yol boÅŸluk iÃ§eriyorsa:

```bash
sh lrclib.sh "/MÃ¼zik/Dosya/MÃ¼zik Yolu" --overwrite
```

(Desteklenen biÃ§imler: `mp3`, `flac`)

<a id="lyrics-en"></a>

### ğŸ‡¬ğŸ‡§ English

A standalone script to fetch synchronized lyrics from `lrclib.net` (`lrclib.sh`). Works independently of the plugin (Linux).

**Requirements:** `curl`, `jq`, `find`

**Track filename format:** `'artist' - 'track title'` (e.g., `Ali KÄ±nÄ±k - Ali AyÅŸeyi Seviyor`)

**Usage:**

```bash
sh lrclib.sh /Path/To/Your/Music/Directory
```

Overwrite existing lyrics:

```bash
sh lrclib.sh /Path/To/Your/Music/Directory --overwrite
```

Paths with spaces:

```bash
sh lrclib.sh "/Path/To/Your/Music Path" --overwrite
```

(Supported formats: `mp3`, `flac`)

---

<a id="trailers"></a>

## ğŸ¬ Trailer Scripts / Fragman Betikleri

<a id="trailers-en"></a>

### ğŸ‡¬ğŸ‡§ English

This repository contains **two related scripts** for adding trailers to your Jellyfin media library:

* `trailers.sh` â†’ Downloads and saves **local MP4 trailers** using `yt-dlp`.
* `trailersurl.sh` â†’ Adds only a **trailer URL** into NFO metadata files (trailersurl.sh does not perform downloads. For it to work, you need to have NFO enabled in your Jellyfin library, and the content folders must already contain pre-generated NFO files.).

Both use TMDb for trailer discovery and refresh Jellyfin metadata afterward.

#### Which one should I use?

* Use `trailers.sh` if you want **offline, locally stored MP4 trailers** (more disk usage, but reliable even without internet).
* Use `trailersurl.sh` if you prefer **fast, lightweight setup with no downloads**, but note: trailers will stream online and need internet at playback.

#### Features

* Movie and TV (Series/Season/Episode) support
* Multiâ€‘language trailer discovery (preferred + fallback)
* Metadata refresh after adding trailer (either file or URL)
* Summary report with counts (downloaded/skipped/errors or NFO updated/skipped/errors)

#### Requirements

Common dependencies:

* **Shell**: bash (Linux/macOS)
* **Tools**: `curl`, `jq`

Additional for `trailers.sh`:

* `yt-dlp` (required)
* `ffprobe` (optional, from `ffmpeg`)

#### Installation

Choose your distro and run:

(Note: It is recommended to install yt-dlp via pip. Using pip instead of a package manager ensures you get the latest version and a smoother experience.)

**Debian / Ubuntu**

```bash
sudo apt update
sudo apt install -y curl jq ffmpeg yt-dlp
```

**Arch / Manjaro**

```bash
sudo pacman -S curl jq ffmpeg yt-dlp
```

**Fedora**

```bash
sudo dnf install -y curl jq ffmpeg yt-dlp
```

**openSUSE**

```bash
sudo zypper install -y curl jq ffmpeg yt-dlp
```

**Alpine**

```bash
sudo apk add curl jq ffmpeg yt-dlp
```

#### Get the scripts

```bash
curl -fsSL -o trailers.sh "https://raw.githubusercontent.com/G-grbz/Jellyfin-Media-Slider/main/trailers.sh"
curl -fsSL -o trailersurl.sh "https://raw.githubusercontent.com/G-grbz/Jellyfin-Media-Slider/main/trailersurl.sh"
chmod +x trailers.sh trailersurl.sh
```

#### Configuration

Both scripts use environment variables. Common ones:

---

## Environment Variables Reference

| Variable                    | Default                                                            | Description / Allowed Values                                                                                                                        |
| --------------------------- | ------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| `JF_BASE`                   | `http://localhost:8096`                                            | Jellyfin server base URL.                                                                                                                           |
| `JF_API_KEY`                | `CHANGE_ME`                                                        | **Required.** Jellyfin API key.                                                                                                                     |
| `TMDB_API_KEY`              | `CHANGE_ME`                                                        | **Required.** TMDb API key.                                                                                                                         |
| `PREFERRED_LANG`            | `tr-TR`                                                            | Preferred language code for TMDb lookups.                                                                                                           |
| `FALLBACK_LANG`             | `en-US`                                                            | Fallback language code if preferred is unavailable.                                                                                                 |
| `INCLUDE_TYPES`             | `Movie,Series,Season,Episode`                                      | Media types to scan from Jellyfin.                                                                                                                  |
| `PAGE_SIZE`                 | `200`                                                              | Pagination size for Jellyfin `/Items` queries.                                                                                                      |
| `JF_USER_ID`                | *(empty)*                                                          | Jellyfin user ID. If unset, the script auto-detects an administrator or first user.                                                                 |
| `INCLUDE_LANGS_WIDE`        | `tr,en,hi,de,ru,fr,it,es,ar,fa,pt,zh,ja,ko,nl,pl,sv,cs,uk,el,null` | Broad set of fallback languages for TMDb trailer search when preferred/fallback fails.                                                              |
| `PREFERRED_ISO639`          | derived from `PREFERRED_LANG`                                      | Auto-extracted ISO 639-1 code from preferred language (e.g., `tr-TR` â†’ `tr`). Not typically set manually.                                           |
| `FALLBACK_ISO639`           | derived from `FALLBACK_LANG`                                       | Auto-extracted ISO 639-1 code from fallback language (e.g., `en-US` â†’ `en`). Not typically set manually.                                            |

---

Extra for `trailers.sh`:

* `COOKIES_BROWSER` â†’ Default `(empty)` : Browser to export cookies from for yt-dlp (e.g., firefox, chrome:Default, edge, safari). Useful for age-restricted or region-locked videos.
* `MIN_FREE_MB`  â†’ Default `1024` : Minimum required free space (MiB) in both destination and working directory before downloads are attempted.
* `SLEEP_SECS` â†’ Default `1` : Delay (seconds) after each successful download.
* `MIN_FREE_MB` â†’ Default `1024` : Minimum required free space (MiB) in both destination and working directory before downloads are attempted.
* `CLEANUP_EXTRA_PATHS` â†’ Default *(empty)* : Extra root paths (colon-separated) to clean temp files from.
* `WORK_DIR` â†’ Default `/tmp/trailers-dl` : Working directory for temporary downloads. 
* `ENABLE_THEME_LINK` â†’ Default `0` : If the value is `1`, the downloaded `trailer.mp4` file will be used to create a `theme.mp4` inside the newly created `backdrops/` directory, either as a symbolic link, hard link, or copy, depending on the chosen option.
* `THEME_LINK_MODE` â†’ Default `symlink` : Mode for theme creation. Options: `symlink`, `hardlink`, `copy`.
* `OVERWRITE_POLICY` â†’ Default `skip` : Behavior when `trailer.mp4` already exists. Values: `skip`, `replace`, `if-better`.
* `BETTER_MIN_SIZE_DELTA` â†’ Default `1048576` : In `if-better` mode: new trailer must be at least this many bytes larger to count as better.
* `BETTER_MIN_DURATION_DELTA` â†’ Default `3` : In `if-better` mode: new trailer must be longer by at least this many seconds to count as better.

## Notes

* **`OVERWRITE_POLICY=if-better`** logic: the new trailer is kept only if it is longer (`BETTER_MIN_DURATION_DELTA`) **or** larger (`BETTER_MIN_SIZE_DELTA`) than the existing one.
* **Theme file (`backdrops/theme.mp4`)**: Enabled with `ENABLE_THEME_LINK=1`, created using the chosen method in `THEME_LINK_MODE`.
* **`COOKIES_BROWSER`** example: `COOKIES_BROWSER=firefox` or `COOKIES_BROWSER="chrome:Default"` to use yt-dlp with authenticated sessions.
---

#### Usage

**Download trailers (trailers.sh):**

```bash
JF_BASE="http://jellyfinserveraddress:8096" \
JF_API_KEY="API-KEY-HERE" \
TMDB_API_KEY="TMDB-API-KEY-HERE" \
COOKIES_BROWSER=chrome \
MIN_FREE_MB=2048 \
OVERWRITE_POLICY= if-better \
ENABLE_THEME_LINK=1 \
PREFERRED_LANG=tr-TR \
INCLUDE_LANGS_WIDE="tr,en,hi,de,ru,fr,it,es,ar,fa,pt,zh,ja,ko,null" \
./trailers.sh
```

**Add only trailer URLs (trailersurl.sh):**

```bash
JF_BASE="http://jellyfinserveraddress:8096" \
JF_API_KEY="API-KEY-HERE" \
TMDB_API_KEY="TMDB-API-KEY-HERE" \
PREFERRED_LANG=tr-TR \
INCLUDE_LANGS_WIDE="tr,en,hi,de,ru,fr,it,es,ar,fa,pt,zh,ja,ko,null" \
./trailersurl.sh
```

#### Systemd timer (optional)

Create a service at `/etc/systemd/system/trailers.service`:

```ini
[Unit]
Description=Download trailers for Jellyfin library

[Service]
Type=oneshot
Environment=JF_BASE=http://localhost:8096
Environment=JF_API_KEY=<JF_API-KEY>
Environment=TMDB_API_KEY=<TMDB_API-KEY>
Environment=PREFERRED_LANG=tr-TR
Environment=COOKIES_BROWSER=chrome
Environment=INCLUDE_LANGS_WIDE=tr,en,hi,de,ru,fr,it,es,ar,fa,pt,zh,ja,ko,null
WorkingDirectory=/opt/trailers(replace this with the directory path where the scripts are located)
ExecStart=/directory-path/trailers.sh
```

Timer `/etc/systemd/system/trailers.timer`:

```ini
[Unit]
Description=Run trailers.sh daily

[Timer]
OnCalendar=03:30
Persistent=true

[Install]
WantedBy=timers.target
```

Enable:

```bash
sudo systemctl daemon-reload
sudo systemctl enable --now trailers.timer
```

---

<a id="trailers-tr"></a>

### ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e

Bu repo Jellyfin kÃ¼tÃ¼phanenize fragman eklemek iÃ§in **iki betik** iÃ§erir:

* `trailers.sh` â†’ `yt-dlp` ile **yerel MP4 fragmanlarÄ±** indirir.
* `trailersurl.sh` â†’ Sadece **fragman URLâ€™sini** `.nfo` dosyasÄ±na ekler (Ä°ndirme iÅŸlemi yapmaz. Bunun Ã§alÄ±ÅŸabilmesi iÃ§in Jellyfin kÃ¼tÃ¼phanenizde NFO etkin olmalÄ± ve iÃ§erik klasÃ¶rlerinde Ã¶nceden oluÅŸturulmuÅŸ NFO dosyalarÄ± bulunmalÄ±dÄ±r).

Her ikisi de TMDb Ã¼zerinden fragman arar ve iÅŸlem sonrasÄ± Jellyfin meta verisini yeniler.

#### Hangisini kullanmalÄ±?

* `trailers.sh` â†’ **Ä°nternetsiz Ã§alÄ±ÅŸabilen yerel MP4 dosyalarÄ±** istiyorsanÄ±z kullanÄ±n (daha fazla disk kullanÄ±r).
* `trailersurl.sh` â†’ **Hafif ve hÄ±zlÄ±** Ã§Ã¶zÃ¼m istiyorsanÄ±z kullanÄ±n (disk kullanmaz ama oynatma iÃ§in internet gerekir).

#### Ã–zellikler

* Film ve Dizi (Dizi/Sezon/BÃ¶lÃ¼m) desteÄŸi
* Tercihli/yedek dil ile Ã§oklu dil desteÄŸi
* Fragman eklendikten sonra meta veri yenileme
* Ã–zet rapor (indirilen/atlanÄ±lan/hatalÄ± ya da NFO gÃ¼ncellenen/atlanÄ±lan)

#### Gerekli AraÃ§lar

Ortak baÄŸÄ±mlÄ±lÄ±klar:

* **Kabuk**: bash
* **AraÃ§lar**: `curl`, `jq`

Ek olarak `trailers.sh` iÃ§in:

* `yt-dlp` (zorunlu)
* `ffprobe` (`ffmpeg` paketinden, opsiyonel)

#### Kurulum

DaÄŸÄ±tÄ±mÄ±nÄ±za gÃ¶re:

(not: yt-dlp kurulumunu pip Ã¼zerinden yapmanÄ±z tavsiye edilir. Paket yÃ¶neticileriyle kurulum yerine pip kullanmanÄ±z daha gÃ¼ncel ve sorunsuz bir deneyim saÄŸlayacaktÄ±r.)

**Debian / Ubuntu**

```bash
sudo apt update
sudo apt install -y curl jq ffmpeg yt-dlp
```

**Arch / Manjaro**

```bash
sudo pacman -S curl jq ffmpeg yt-dlp
```

**Fedora**

```bash
sudo dnf install -y curl jq ffmpeg yt-dlp
```

**openSUSE**

```bash
sudo zypper install -y curl jq ffmpeg yt-dlp
```

**Alpine**

```bash
sudo apk add curl jq ffmpeg yt-dlp
```

#### Betikleri indir

```bash
curl -fsSL -o trailers.sh "https://raw.githubusercontent.com/G-grbz/Jellyfin-Media-Slider/main/trailers.sh"
curl -fsSL -o trailersurl.sh "https://raw.githubusercontent.com/G-grbz/Jellyfin-Media-Slider/main/trailersurl.sh"
chmod +x trailers.sh trailersurl.sh
```

#### YapÄ±landÄ±rma

---

## Ortam DeÄŸiÅŸkenleri ReferansÄ±

| DeÄŸiÅŸken                    | VarsayÄ±lan                                                         | AÃ§Ä±klama / GeÃ§erli DeÄŸerler                                                                                                                        |
| --------------------------- | ------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| `JF_BASE`                   | `http://localhost:8096`                                            | Jellyfin sunucu adresi.                                                                                                                            |
| `JF_API_KEY`                | `CHANGE_ME`                                                        | **Zorunlu.** Jellyfin API anahtarÄ±.                                                                                                                |
| `TMDB_API_KEY`              | `CHANGE_ME`                                                        | **Zorunlu.** TMDb API anahtarÄ±.                                                                                                                    |
| `PREFERRED_LANG`            | `tr-TR`                                                            | TMDb sorgularÄ± iÃ§in tercih edilen dil kodu.                                                                                                        |
| `FALLBACK_LANG`             | `en-US`                                                            | Tercih edilen dil bulunmazsa kullanÄ±lacak yedek dil.                                                                                               |
| `INCLUDE_TYPES`             | `Movie,Series,Season,Episode`                                      | Jellyfinâ€™de taranacak medya tÃ¼rleri.                                                                                                               |
| `PAGE_SIZE`                 | `200`                                                              | Jellyfin `/Items` sayfalama boyutu.                                                                                                                |
| `JF_USER_ID`                | *(boÅŸ)*                                                            | Jellyfin kullanÄ±cÄ± IDâ€™si. Ayarlanmazsa script otomatik yÃ¶netici veya ilk kullanÄ±cÄ±yÄ± Ã§Ã¶zer.                                                        |
| `INCLUDE_LANGS_WIDE`        | `tr,en,hi,de,ru,fr,it,es,ar,fa,pt,zh,ja,ko,nl,pl,sv,cs,uk,el,null` | TMDb trailer aramalarÄ±nda geniÅŸ dil havuzu. Tercih/yedek dil sonuÃ§ vermezse devreye girer.                                                         |
| `PREFERRED_ISO639`          | `PREFERRED_LANG`â€™den tÃ¼retilir                                     | Otomatik Ã§Ä±karÄ±lÄ±r (`tr-TR` â†’ `tr`). Manuel ayarlamaya gerek yok.                                                                                  |
| `FALLBACK_ISO639`           | `FALLBACK_LANG`â€™den tÃ¼retilir                                      | Otomatik Ã§Ä±karÄ±lÄ±r (`en-US` â†’ `en`). Manuel ayarlamaya gerek yok.                                                                                  |

---

Ekstra `trailers.sh` iÃ§in:

* `COOKIES_BROWSER` â†’ varsayÄ±lan `(boÅŸ)` : yt-dlp iÃ§in Ã§erezlerin alÄ±nacaÄŸÄ± tarayÄ±cÄ± (Ã¶rn. firefox, chrome:Default, edge, safari). YaÅŸ kÄ±sÄ±tlÄ± veya bÃ¶lge kilitli videolarda faydalÄ±.
* `MIN_FREE_MB` â†’ varsayÄ±lan `1024` : Hem hedef hem de Ã§alÄ±ÅŸma klasÃ¶rÃ¼nde olmasÄ± gereken minimum boÅŸ alan (MiB). AltÄ±ndaysa indirme yapÄ±lmaz.
* `SLEEP_SECS ` â†’ varsayÄ±lan `1` : BaÅŸarÄ±lÄ± her indirmeden sonra beklenecek saniye.
* `OVERWRITE_POLICY` â†’ varsayÄ±lan `skip` : Var olan `trailer.mp4` dosyasÄ± iÃ§in davranÄ±ÅŸ. DeÄŸerler: `skip`, `replace`, `if-better`.                              
* `WORK_DIR` â†’ varsayÄ±lan`/tmp/trailers-dl` : GeÃ§ici indirme klasÃ¶rÃ¼.                                                                                            
* `ENABLE_THEME_LINK` â†’ varsayÄ±lan `0` : DeÄŸer `1` ise, indirilen `trailer.mp4` dosyasÄ±, yeni oluÅŸturulacak `backdrops/` dizininin iÃ§ine theme.mp4 eklemek iÃ§in seÃ§ime gÃ¶re sembolik baÄŸlantÄ±, sabit baÄŸlantÄ± veya kopya oluÅŸturur.                              
* `THEME_LINK_MODE` â†’ varsayÄ±lan `symlink` : Tema dosyasÄ± oluÅŸturma yÃ¶ntemi: `symlink`, `hardlink`, `copy`.                                                      
* `CLEANUP_EXTRA_PATHS` â†’ *(boÅŸ)* : Ek temizlenecek klasÃ¶r kÃ¶kleri. Birden Ã§ok yol `:` ile ayrÄ±labilir. 
* `BETTER_MIN_SIZE_DELTA` â†’ `1048576` : `if-better` modunda: yeni dosya en az bu kadar bayt daha bÃ¼yÃ¼kse â€œdaha iyiâ€ kabul edilir.
* `BETTER_MIN_DURATION_DELTA` â†’ `3` : `if-better` modunda: yeni dosya en az bu kadar saniye daha uzunsa â€œdaha iyiâ€ kabul edilir.             

## Notlar

* **`OVERWRITE_POLICY=if-better`** mantÄ±ÄŸÄ±: Yeni trailer, sÃ¼resi `BETTER_MIN_DURATION_DELTA` kadar daha uzunsa **veya** boyutu `BETTER_MIN_SIZE_DELTA` kadar daha bÃ¼yÃ¼kse kabul edilir.
* **Tema dosyasÄ± (`backdrops/theme.mp4`)**: `ENABLE_THEME_LINK=1` ile etkinleÅŸtirilir, `THEME_LINK_MODE` yÃ¶ntemine gÃ¶re oluÅŸturulur.
* **`COOKIES_BROWSER`** Ã¶rnek: `COOKIES_BROWSER=firefox` veya `COOKIES_BROWSER="chrome:Default"`.

---


#### Ã–rnek KullanÄ±m

**Fragman indir (trailers.sh):**

```bash
JF_BASE="http://jellyfinserveradres:8096" \
JF_API_KEY="API-KEY-BURAYA" \
TMDB_API_KEY="TMDB-API-KEY-BURAYA" \
COOKIES_BROWSER=chrome \
MIN_FREE_MB=2048 \
ENABLE_THEME_LINK=1 \
PREFERRED_LANG=tr-TR \
OVERWRITE_POLICY=if-better \
INCLUDE_LANGS_WIDE="tr,en,hi,de,ru,fr,it,es,ar,fa,pt,zh,ja,ko,null" \
./trailers.sh
```

**Sadece URL ekle (trailersurl.sh):**

```bash
JF_BASE="http://jellyfinserveradres:8096" \
JF_API_KEY="API-KEY-BURAYA" \
TMDB_API_KEY="TMDB-API-KEY-BURAYA" \
PREFERRED_LANG=tr-TR \
INCLUDE_LANGS_WIDE="tr,en,hi,de,ru,fr,it,es,ar,fa,pt,zh,ja,ko,null" \
./trailersurl.sh
```

#### Systemd zamanlayÄ±cÄ± (opsiyonel)

`/usr/lib/systemd/system/trailers.service`:

```ini
[Unit]
Description=Jellyfin kÃ¼tÃ¼phanesi iÃ§in fragman indirme

[Service]
Type=oneshot
Environment=JF_BASE=http://localhost:8096
Environment=JF_API_KEY=<JF_ANAHTAR>
Environment=TMDB_API_KEY=<TMDB_ANAHTAR>
Environment=PREFERRED_LANG=tr-TR
Environment=COOKIES_BROWSER=chrome
Environment=INCLUDE_LANGS_WIDE=tr,en,hi,de,ru,fr,it,es,ar,fa,pt,zh,ja,ko,null
WorkingDirectory=/opt/trailers(burayÄ± betiklerin bulunduÄŸu dizin yolu ile deÄŸiÅŸtirin)
ExecStart=/dizin-yolu/trailers.sh
```

`/usr/lib/systemd/system/trailers.timer`:

```ini
[Unit]
Description=trailers.sh gÃ¼nlÃ¼k Ã§alÄ±ÅŸtÄ±rma

[Timer]
OnCalendar=03:30
Persistent=true

[Install]
WantedBy=timers.target
```

EtkinleÅŸtir:

```bash
sudo systemctl daemon-reload
sudo systemctl enable --now trailers.timer
```

---

<a id="license"></a>

## ğŸ“„ License and Usage Notice

This project is not allowed to be copied, redistributed, or published without explicit permission.

If you intend to use, modify, or share any part of this project, you must:

* Credit the original author clearly.
* Provide a link to the original repository.
* Indicate any changes made if the project is modified or forked.

Unauthorized use or redistribution is strictly prohibited.

Thank you for respecting the work and effort behind this project.
